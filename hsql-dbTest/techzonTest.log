/*C1*/SET SCHEMA SYSTEM_LOBS
INSERT INTO BLOCKS VALUES(0,2147483647,0)
COMMIT
/*C2*/SET SCHEMA PUBLIC
drop table if exists admin CASCADE 
drop table if exists carrello CASCADE 
drop table if exists carta_credito CASCADE 
drop table if exists citta CASCADE 
drop table if exists corriere CASCADE 
drop table if exists indirizzo CASCADE 
drop table if exists preferito CASCADE 
drop table if exists prodotto CASCADE 
drop table if exists prodotto_carrello CASCADE 
drop table if exists provincia CASCADE 
drop table if exists recensione CASCADE 
drop table if exists regione CASCADE 
drop table if exists reso CASCADE 
drop table if exists richiesta_corriere CASCADE 
drop table if exists segnalazione_utente CASCADE 
drop table if exists user CASCADE 
drop table if exists utente_carta CASCADE 
drop table if exists utente_prodotto CASCADE 
drop sequence hibernate_sequence if exists
create sequence hibernate_sequence start with 1 increment by 1
create table admin (id bigint generated by default as identity (start with 1), cognome varchar(40) not null, email varchar(255) not null, nome varchar(40) not null, password varchar(255) not null, telefono bigint not null, username varchar(255) not null, primary key (id))
create table carrello (id bigint generated by default as identity (start with 1), user_id bigint, primary key (id))
create table carta_credito (id bigint generated by default as identity (start with 1), anno_scadenza varchar(255) not null, cvv varchar(255) not null, mese_scadenza varchar(255) not null, numero_carta varchar(255) not null, tipologia varchar(255) not null, titolare varchar(255) not null, primary key (id))
create table citta (id bigint not null, nome varchar(255), provincia_id bigint, primary key (id))
create table corriere (id bigint generated by default as identity (start with 1), cognome varchar(40) not null, data_nascita date not null, email varchar(255) not null, genere varchar(255) not null, nome varchar(40) not null, password varchar(255) not null, telefono varchar(255) not null, username varchar(255) not null, primary key (id))
create table indirizzo (id bigint generated by default as identity (start with 1), cap varchar(255), citta varchar(30), provincia varchar(30), regione varchar(40), via varchar(30), user_id bigint, primary key (id))
create table preferito (id bigint generated by default as identity (start with 1), id_prodotto bigint, id_user bigint, primary key (id))
create table prodotto (id bigint generated by default as identity (start with 1), anteprima_descrizione varchar(255) not null, categoria varchar(255) not null, colore varchar(255) not null, data_aggiunta date not null, descrizione varchar(2000) not null, dimensioni varchar(255), disponibile boolean not null, marca varchar(255), memoria_arc varchar(255), memoria_ram varchar(255), modello varchar(255), peso double, prezzo double not null, quantita integer not null, sconto integer not null, titolo varchar(255) not null, url1 varchar(255) not null, url2 varchar(255) not null, url3 varchar(255) not null, url4 varchar(255) not null, venduto_da bigint, primary key (id))
create table prodotto_carrello (id bigint generated by default as identity (start with 1), quantita integer not null, id_carrello bigint, id_prodotto bigint, primary key (id))
create table provincia (id bigint not null, nome varchar(255) not null, regione_id bigint, primary key (id))
create table recensione (id bigint generated by default as identity (start with 1), approvata boolean not null, data_aggiunta date not null, rating integer not null, recensione varchar(255) not null, creata_da bigint, prodotto_recensito bigint, primary key (id))
create table regione (id bigint not null, nome varchar(255) not null, primary key (id))
create table reso (id bigint generated by default as identity (start with 1), id_prodotto bigint not null, motivo varchar(255) not null, prezzo float not null, quantita integer not null, rimborsato boolean not null, destinatario varchar(255) not null, mittente varchar(255) not null, utente_prodotto_id bigint, primary key (id))
create table richiesta_corriere (id bigint generated by default as identity (start with 1), cognome varchar(40) not null, data_colloquio date, data_nascita date not null, email varchar(255) not null, genere varchar(255) not null, hanno_colloquio boolean, nome varchar(40) not null, ora_colloquio time, telefono varchar(255) not null, url_pdf varchar(255) not null, primary key (id))
create table segnalazione_utente (id bigint generated by default as identity (start with 1), motivazione_principale varchar(255) not null, utente_che_fa_segnalazione bigint, user_segnalato_id bigint, primary key (id))
create table user (id bigint generated by default as identity (start with 1), bloccato boolean not null, cognome varchar(40) not null, data_nascita date not null, email varchar(255) not null, genere varchar(255) not null, immagine_profilo varchar(255) not null, nome varchar(40) not null, password varchar(255) not null, punti integer not null, saldo double not null, telefono varchar(255) not null, username varchar(255) not null, primary key (id))
create table utente_carta (id_carta bigint not null, id_user bigint not null)
create table utente_prodotto (id bigint generated by default as identity (start with 1), quantita integer not null, stato varchar(255) not null, id_corriere bigint, id_prodotto bigint, id_user bigint, primary key (id))
alter table admin add constraint UK_c0r9atamxvbhjjvy5j8da1kam unique (email)
alter table admin add constraint UK_a3pj6drrpubutquwyiot0smqy unique (telefono)
alter table admin add constraint UK_gfn44sntic2k93auag97juyij unique (username)
alter table carta_credito add constraint UK_m6u0ypaid93j5436io8hxnlb4 unique (numero_carta)
alter table corriere add constraint UK_ljg88f9ykuu1fu4b7xg20480g unique (email)
alter table corriere add constraint UK_fl86fbx510kl3iscq2pyr4wdb unique (username)
alter table preferito add constraint UKolsa19cejun7tapa4mw68erlr unique (id_prodotto, id_user)
alter table prodotto_carrello add constraint UKwjhb5u392pksxqxochti2beo unique (id_carrello, id_prodotto)
alter table reso add constraint UK_t389d8tybp4fbcb4wcq4pvma7 unique (utente_prodotto_id)
alter table richiesta_corriere add constraint UK_m5salqhrl7r2u0bu5rhdxmmh5 unique (email)
alter table user add constraint UK_ob8kqyqqgmefl0aco34akdtpe unique (email)
alter table user add constraint UK_sb8bbouer5wak8vyiiy4pf2bx unique (username)
alter table carrello add constraint FK51djk0eyyath1ltiau6vpeum6 foreign key (user_id) references user
alter table citta add constraint FKbeaqg06gaaxnc3nmbk918cy5n foreign key (provincia_id) references provincia
alter table indirizzo add constraint FKhagos8j1me0xnrld2jygprmtf foreign key (user_id) references user
alter table preferito add constraint FKjxa0jrxvklb8213goeael82ge foreign key (id_prodotto) references prodotto
alter table preferito add constraint FKc4x9g279f4qjliqt7arqlhwdj foreign key (id_user) references user
alter table prodotto add constraint FKfvlqt8fyq4o11lysflg5athh2 foreign key (venduto_da) references user
alter table prodotto_carrello add constraint FK9j50do7h32t9g56gbunk75v9w foreign key (id_carrello) references carrello
alter table prodotto_carrello add constraint FKsbsw2bt7a89t32y6xmqku62a3 foreign key (id_prodotto) references prodotto
alter table provincia add constraint FKtlfmnamch6yqxj9ljcwhuooow foreign key (regione_id) references regione
alter table recensione add constraint FKjpuropwae2lfmuxm7ijepih80 foreign key (creata_da) references user
alter table recensione add constraint FKfjg4qcoilq1jxa6gyd2wpjmkj foreign key (prodotto_recensito) references prodotto
alter table reso add constraint FKrfonfq5in6sha331tngmfs1sf foreign key (utente_prodotto_id) references utente_prodotto
alter table segnalazione_utente add constraint FK4ywlecjf7sx57ebitssi43a6b foreign key (utente_che_fa_segnalazione) references user
alter table segnalazione_utente add constraint FKfb87g6bk1idrhiac2q5trsw7k foreign key (user_segnalato_id) references user
alter table utente_carta add constraint FKjc1njwq8twhw9yjftrlk7fp5f foreign key (id_user) references user
alter table utente_carta add constraint FKrf6khnnmafbws2obk2dec7oc5 foreign key (id_carta) references carta_credito
alter table utente_prodotto add constraint FK1oyd0jf4x4b2l8pjlllsb4ncj foreign key (id_corriere) references corriere
alter table utente_prodotto add constraint FKq9deir0cb95bgm77n1jhgmtqr foreign key (id_prodotto) references prodotto
alter table utente_prodotto add constraint FK7i92px0pqotobr0dpk76uluqp foreign key (id_user) references user
INSERT INTO CARTA_CREDITO VALUES(1,'2020','111','12','1234567891234517','masterCard','Mario Bianchi')
COMMIT
INSERT INTO CARTA_CREDITO VALUES(2,'2020','111','12','1234567891234599','masterCard','Mario Rossi')
COMMIT
DELETE FROM CARTA_CREDITO WHERE ID=2
COMMIT
INSERT INTO CARTA_CREDITO VALUES(3,'2020','111','12','1234567891234512','masterCard','Mario Rossi')
COMMIT
INSERT INTO CARTA_CREDITO VALUES(4,'2020','987','12','1234567891234515','masterCard','Mario Rossi')
COMMIT
INSERT INTO CARTA_CREDITO VALUES(5,'2020','111','12','1234567891234513','masterCard','Mario Rossi')
COMMIT
INSERT INTO CARTA_CREDITO VALUES(6,'2020','333','12','1234567891234333','maestro','Mario Bianchi')
COMMIT
INSERT INTO CARTA_CREDITO VALUES(7,'2020','222','12','1234567891234514','masterCard','Mario Rossi')
COMMIT
INSERT INTO USER VALUES(1,FALSE,'Rossi','1999-12-12','mario93@example.com','M','','Mario','$2a$12$pXZWDyEUqMq.ILbVrjvZ/OtWEle0gOKd3vTB5Iw8bZIEFEVzQLVWO',0,0.0E0,'324543612','Mario93')
COMMIT
INSERT INTO CARRELLO VALUES(1,1)
COMMIT
INSERT INTO USER VALUES(2,FALSE,'Rossi','1999-12-12','mario@example.com','M','','Mario','$2a$12$jpXaou6S9UYp2wKzPG4Sp.Xe9OTSZZxKo8W3dc1Q/EHNlLtSYozVy',0,0.0E0,'324543652','Mario99')
COMMIT
INSERT INTO CARRELLO VALUES(2,2)
COMMIT
INSERT INTO USER VALUES(3,FALSE,'Rossi','1999-12-12','mario90@example.com','M','','Mario','$2a$12$JY81zARG8Kukq9gakH31he0sSqeZq7wjk2PYQi8nxuiVUz2Bs3OK2',0,0.0E0,'324543651','Mario90')
COMMIT
INSERT INTO CARRELLO VALUES(3,3)
COMMIT
INSERT INTO USER VALUES(4,FALSE,'Rossi','1999-12-12','prova@example.com','M','','Mario','$2a$12$mrzZF6jeRY79o9ZCzi1fTu.hE1PZ6QcQip3nlCceDfMs.xgINE0RC',0,0.0E0,'3245436524','Mario98')
COMMIT
INSERT INTO CARRELLO VALUES(4,4)
COMMIT
INSERT INTO USER VALUES(5,FALSE,'Rossi','1999-12-12','mario91@example.com','M','','Mario','$2a$12$TNjUN301sagd0.FNJnizQOAxTN9YihTW8ku97ZP.07lhfj5bBtVYi',0,0.0E0,'324543623','Mario91')
COMMIT
INSERT INTO CARRELLO VALUES(5,5)
COMMIT
DELETE FROM CARRELLO WHERE ID=1
COMMIT
INSERT INTO ADMIN VALUES(1,'Rossi','prova@example.com','Mario','$2a$12$/V4E/O8Q/baDJUUKIAuQfOj7abOVH7c2rAb/XQemPUItwAQXgRSdu',345453543,'Mario99')
COMMIT
INSERT INTO REGIONE VALUES(1,'Basilicata')
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 2
COMMIT
INSERT INTO PROVINCIA VALUES(2,'Matera',1)
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 3
COMMIT
INSERT INTO PROVINCIA VALUES(3,'Potenza',1)
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 4
COMMIT
INSERT INTO CORRIERE VALUES(1,'Rossi','1996-11-12','marioR@libero.it','M','Mario','$2a$12$IaqhDhvt6xnxC9p/bMDd5eJ2xGu8vEUrhMvBk0jDHD9cis4duD84W','345453543','marioRossi')
COMMIT
INSERT INTO CORRIERE VALUES(2,'Bianchi','1996-11-12','mario@libero.it','M','Mario','$2a$12$yp5hQdArfc8O2b1l8B5She.T6vD1YM6aHoqxgLdbFh.upWBCRY5.K','345453678','marioBianchi')
COMMIT
INSERT INTO CORRIERE VALUES(3,'Verdi','1996-11-12','peppe@libero.it','M','Giuseppe','$2a$12$GJK9SbWPPuCKLC8kQEJohOikFVeyZ5BVvkPL0C.hjOJ7X9t9MOlP.','345453990','gv')
COMMIT
INSERT INTO CORRIERE VALUES(4,'Verdi','1996-11-12','marioVerdi@libero.it','M','Mario','$2a$12$LOM8HZOeyI5m7v07r/YFtOgQ3F/7/OsJ8Ew9GCvtAMmR/n8kI5RMK','345453548','marioVerdi')
COMMIT
DISCONNECT
/*C3*/SET SCHEMA PUBLIC
DISCONNECT
/*C4*/SET SCHEMA PUBLIC
DISCONNECT
/*C5*/SET SCHEMA PUBLIC
DISCONNECT
/*C6*/SET SCHEMA PUBLIC
DISCONNECT
/*C7*/SET SCHEMA PUBLIC
DISCONNECT
/*C8*/SET SCHEMA PUBLIC
DISCONNECT
/*C9*/SET SCHEMA PUBLIC
DISCONNECT
/*C10*/SET SCHEMA PUBLIC
DISCONNECT
/*C11*/SET SCHEMA PUBLIC
DISCONNECT
